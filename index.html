<head>
	<title>Rating Converter</title>
	<link rel="stylesheet" href="style.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
</head>
<body>
	<div class="container">
		<p class="center caption">Lichess to FIDE rating converter</p>
		<p class="center">Enter your username:</p>
		<div class="input_container">
			<input type="text" id="username" class="username" autofocus="true" placeholder="username" onchange="resetButton()"><br>
		</div>
		
		<!-- circular progress bar from https://www.codingnepalweb.com/2020/07/circular-progress-bar-using-html-css.html-->
		<div class="circular">
			<div class="inner" onclick="main()">
				<div id="FIDE_rating_container">
					calculate
				</div>
			</div>
			<div class="outer">
			</div>
			<div id="circle" class="circle">
				<div id="dot">
				  <span></span>
				</div>
				<div id="stationary_dot">
				  <span></span>
				</div>
				<div id="bar_left" class="bar left">
					<div id="progress1" class="">
					</div>
				</div>
				<div id="bar_right" class="bar right">
					<div id="progress2" class="">
					</div>
				</div>
			</div>
		</div>
		
		
	</div>
	
	
	<script type="text/javascript" src="converter.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"> </script> 
	<script>
		
		var input = document.getElementById("username");
		input.addEventListener("keyup", function(event) {
		  if (event.keyCode === 13) {
			main();
		  }
		});
		
		jQuery('#username').on('input', function() {
			resetButton()
		});
		
		function resetButton(){	
			const ratingContainer = document.getElementById("FIDE_rating_container");
			ratingContainer.innerHTML = "calculate";
		}
		
		 function sleep(ms) { //https://medium.com/@noamsauerutley/getting-sleep-with-promises-in-js-9a5400b48cda#0c48
			// add ms millisecond timeout before promise resolution
			return new Promise(resolve => setTimeout(resolve, ms))
		}
		
		async function animateProgress(){
			document.getElementById("progress1").classList.add("progress");
			document.getElementById("progress2").classList.add("progress");
			await sleep(500);
			document.getElementById("progress1").classList.remove("progress");
			document.getElementById("progress2").classList.remove("progress");
		}
		
		function main(){
			calculate();
			animateProgress();
		}
		
	</script>
</body>